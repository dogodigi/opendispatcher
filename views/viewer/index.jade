extends ../shared/header
block content
  body(ng-controller='ViewerController')
    nav.navbar.navbar-default.navbar-fixed-top(role='navigation')
      div.container-fluid
        div.navbar-header
          button.navbar-toggle(ng-init="navCollapsed = true", ng-click="navCollapsed = !navCollapsed")
            span.sr-only= t('app.toggleNavigation')
            span.icon-bar
            span.icon-bar
            span.icon-bar
          a#title.navbar-brand(href='#')
            span.glyphicon.glyphicon-fire &nbsp;
            span(data-i18n='app.name') Opendispatcher

        div#navbar.uib-collapse.navbar-collapse(uib-collapse="navCollapsed", ng-controller="NavigationController")
          form.form-inline
            div.input-group(ng-controller="GeocoderController")
              span.input-group-addon
                i.glyphicon.glyphicon-home(ng-hide="noResults", ng-class="{'glyphicon-remove': noResults, 'glyphicon-refresh': loadingLocations}")
                i.glyphicon.glyphicon-remove(ng-show="noResults")
              input#inputAddress.form-control(type="text", typeahead-on-select="onSelect($item, $model, $label)", ng-model="match", placeholder!=t('search.address'), uib-typeahead="match.label for match in getLocation($viewValue)", typeahead-loading="loadingLocations", typeahead-no-results="noResults")
              span.input-group-addon
                i.glyphicon.glyphicon-search

            div#btn-grp-search.btn-group(style='display:none;')

            div#btngrp_3.btn-group
              a#c_minimap.btn.navbar-btn.btn-default(ng-click='toggleMiniMap()', title=t('map.mini'))
                i.fa.fa-picture-o
              a#c_settings.btn.navbar-btn.btn-default(ng-click="open('settings')", data-toggle='modal', title=t('map.settings'))
                i.fa.fa-cogs
              a#tb01.btn.navbar-btn.btn-default(ng-click="open('overlays')", data-toggle='modal', title=t('map.overlays'))
                i.fa.fa-map-marker
              a#tb02.btn.navbar-btn.btn-default(ng-click="open('baselayers')", data-toggle='modal', title=t('map.baselayers'))
                i.fa.fa-globe
              a#tb03.btn.navbar-btn.btn-default(href='#', title=t('map.info'))
                i.fa.fa-info-circle
            div#btngrp_navigation.btn-group
              a#zoom_prev.btn.navbar-btn.btn-default(ng-disabled='previousDisabled', ng-click='historyPrevious()', title=t('map.prev'))
                i.fa.fa-backward
              a#zoom_next.btn.navbar-btn.btn-default(ng-disabled='nextDisabled', ng-click='historyNext()', title=t('map.next'))
                i.fa.fa-forward
              a#zoom_in.btn.navbar-btn.btn-default(ng-click='zoomIn()', title=t('map.zoomIn'))
                i.fa.fa-search-plus
              a#zoom_out.btn.navbar-btn.btn-default(ng-click='zoomOut()', title=t('map.zoomOut'))
                i.fa.fa-search-minus
              a#zoom_extent.btn.navbar-btn.btn-default(ng-click='zoomExtent()', title=t('map.zoomExtent'))
                i.fa.fa-arrows-alt
              a#permalink.btn.navbar-btn.btn-default(title=t('map.permalink'))
                i.fa.fa-link
    div.container-fluid.fill
      div.loadscreen(ng-hide="!loading")

      leaflet#map(ng-hide="loading", defaults='defaults', geojson='geojson', layers="layers", controls="controls")

      div#sidebar-wrapper
        div#btngrp_3.btn-group.btn-group-vertical
          a#c_minimap.btn.btn-default(href='#', title=t('map.mini'))
            i.fa.fa-picture-o
          a#c_settings.btn.btn-default(href='#settingspanel', data-toggle='modal', title=t('map.settings'))
            i.fa.fa-cogs
          a#tb01.btn.btn-default(href='#overlaypanel', data-toggle='modal', title=t('map.overlays'))
            i.fa.fa-map-marker
          a#tb02.btn.btn-default(href='#baselayerpanel', data-toggle='modal', title=t('map.baselayers'))
            i.fa.fa-globe
          a#tb03.btn.btn-default(href='#', title=t('map.info'))
            i.fa.fa-info-circle

    div#footer
      div.container
        span#measure
        span#coords
        span#scale
        span#attribution

    include ../shared/scripts
